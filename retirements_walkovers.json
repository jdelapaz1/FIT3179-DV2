{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "Monthly count of walkovers/retirements with gradient area fill.",
  "width": "container",
  "height": 520,
  "data": {
    "url": "atp_tournaments_2024 copy.csv",
    "format": { "type": "csv", "parse": { "Date": "date" } }
  },
  "transform": [
    { "filter": "test(/^(Retired|Walkover)$/i, datum.Comment)" }
  ],
  "layer": [
    {
      "mark": {
        "type": "area",
        "line": { "color": "darkgreen" },
        "color": {
          "x1": 1,
          "y1": 1,
          "x2": 1,
          "y2": 0,
          "gradient": "linear",
          "stops": [
            { "offset": 0, "color": "white" },
            { "offset": 1, "color": "darkgreen" }
          ]
        },
        "opacity": 0.9
      },
      "encoding": {
        "x": {
          "timeUnit": "yearmonth",
          "field": "Date",
          "type": "temporal",
          "title": "Month",
          "axis": { "format": "%b %Y", "labelAngle": -30 }
        },
        "y": {
          "aggregate": "count",
          "type": "quantitative",
          "title": "Walkovers / Retirements"
        },
        "tooltip": [
          { "timeUnit": "yearmonth", "field": "Date", "type": "temporal", "title": "Month", "format": "%b %Y" },
          { "aggregate": "count", "type": "quantitative", "title": "Count" }
        ]
      }
    },
    {
      "mark": { "type": "point", "filled": true, "color": "darkgreen", "size": 60 },
      "encoding": {
        "x": { "timeUnit": "yearmonth", "field": "Date" },
        "y": { "aggregate": "count" }
      }
    }
  ],
  "config": {
    "view": { "stroke": null }
  }
}
